# Next.js Project Development Guide

This guide covers developing and customizing the Next.js restaurant websites generated by our system.

## 🏗️ System Overview

**Every generated website is a complete Next.js 15 application** with:
- **App Router architecture** (latest Next.js standard)
- **TypeScript** for type safety and better DX
- **Static export** capability for fast CDN deployment
- **Tailwind CSS + Material-UI** for styling
- **Optimized builds** with automatic code splitting

## 🚀 Next.js Technology Stack

### Core Dependencies (Fixed Versions)
```json
{
  "next": "15.4.2",
  "react": "19.1.0", 
  "react-dom": "19.1.0",
  "@types/react": "^19.1.0",
  "typescript": "^5.0.0",
  "tailwindcss": "^4.0.0",
  "@mui/material": "^7.2.0"
}
```

### Node.js Requirements
- **Node.js 18-20**: Required for Next.js 15.4.x and React 19
- **npm**: Use npm for consistency with shared dependencies
- **TypeScript**: All templates use TypeScript by default

## 📁 Next.js Project Structure

### Generated Website Structure
Each generated website follows Next.js App Router conventions:

```
final_websites/<restaurant-name>/
├── package.json              # Next.js dependencies
├── next.config.ts             # Static export configuration  
├── tsconfig.json              # TypeScript configuration
├── tailwind.config.js         # Tailwind CSS configuration
├── postcss.config.mjs         # PostCSS configuration
├── restaurant-data.json       # Restaurant data (runtime access)
├── src/
│   ├── app/                   # Next.js App Router
│   │   ├── layout.tsx         # Root layout component
│   │   ├── page.tsx           # Home page component
│   │   ├── globals.css        # Global styles
│   │   └── theme.ts           # Material-UI theme
│   ├── components/            # React components
│   │   ├── Header.tsx
│   │   ├── Menu.tsx
│   │   ├── Footer.tsx
│   │   └── ...
│   ├── data/
│   │   └── restaurant.ts      # Transformed restaurant data
│   ├── types/
│   │   └── restaurant.ts      # TypeScript interfaces
│   └── theme/
│       ├── ThemeProvider.tsx  # Material-UI provider
│       └── tokens.ts          # Design tokens
├── public/                    # Static assets
└── out/                       # Static export output (after build)
```

## 🔧 Next.js Configuration

### next.config.ts
All websites use static export configuration:

```typescript
import type { NextConfig } from 'next';

const nextConfig: NextConfig = {
  output: 'export',           // Static export for CDN deployment
  trailingSlash: true,        // Ensure consistent URLs
  images: {
    unoptimized: true,        // Required for static export
  },
  typescript: {
    ignoreBuildErrors: false,  // Strict TypeScript checking
  },
  eslint: {
    ignoreDuringBuilds: false, // Strict ESLint checking
  },
};

export default nextConfig;
```

### Key Configuration Points
- **Static Export**: Enables deployment to any CDN or static host
- **TypeScript Strict**: Ensures type safety across the application
- **Image Optimization**: Configured for static deployment
- **Trailing Slash**: Consistent URL structure

## 🎨 Template Development

### Creating New Templates

Templates are Next.js applications with specific structure requirements:

#### 1. Required Files
Every template must include these Next.js App Router files:

```
templates/variants/<template-name>/
├── template.json              # Template metadata
└── src/app/
    ├── layout.tsx             # REQUIRED: Root layout
    ├── page.tsx               # REQUIRED: Home page
    ├── globals.css            # REQUIRED: Global styles
    └── theme.ts               # RECOMMENDED: Material-UI theme
```

#### 2. Template Metadata (template.json)
```json
{
  "id": "my-template",
  "name": "My Restaurant Template",
  "description": "Modern Next.js restaurant website",
  "version": "2.0.0",
  "framework": "nextjs",
  "language": "typescript",
  "styling": "tailwind+mui",
  "recommended_for": ["restaurant-type"],
  "features": [
    "responsive-design",
    "typescript",
    "seo-optimized"
  ],
  "structure": {
    "template_type": "variant",
    "uses_shared": true,
    "custom_files": [
      "src/app/layout.tsx",
      "src/app/page.tsx", 
      "src/app/globals.css",
      "src/app/theme.ts"
    ]
  }
}
```

#### 3. Layout Component (layout.tsx)
```typescript
import type { Metadata } from 'next';
import { Inter } from 'next/font/google';
import './globals.css';

const inter = Inter({ subsets: ['latin'] });

export const metadata: Metadata = {
  title: 'Restaurant Name',
  description: 'Professional restaurant website',
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en">
      <body className={inter.className}>{children}</body>
    </html>
  );
}
```

#### 4. Home Page Component (page.tsx)
```typescript
import { restaurantData } from '@/data/restaurant';
import { Header } from '@/components/Header';
import { Menu } from '@/components/Menu';
import { Footer } from '@/components/Footer';

export default function HomePage() {
  return (
    <div className="min-h-screen">
      <Header restaurant={restaurantData} />
      <main>
        <Menu items={restaurantData.menu} />
      </main>
      <Footer restaurant={restaurantData} />
    </div>
  );
}
```

## 🔄 Build Process Integration

### How Templates Become Next.js Projects

1. **Base Copy**: Shared Next.js configuration and dependencies copied
2. **Template Overlay**: Template-specific files overwrite shared files
3. **Data Transformation**: Restaurant JSON transformed to TypeScript interfaces
4. **Dependency Resolution**: npm install runs automatically
5. **Next.js Build**: `npm run build` creates optimized bundle
6. **Static Export**: `next export` generates static files

### Build Commands
Each generated website supports standard Next.js commands:

```bash
# Development server with hot reload
npm run dev

# Production build
npm run build

# Start production server (if needed)
npm start

# Export static files (already configured)
npm run build  # Automatically exports to 'out' directory
```

## 🎯 TypeScript Integration

### Type Safety Throughout
All generated websites use strict TypeScript:

#### Restaurant Data Types
```typescript
// src/types/restaurant.ts
export interface RestaurantData {
  name: string;
  description: string;
  menu: MenuItem[];
  contact: ContactInfo;
}

export interface MenuItem {
  id: string;
  name: string;
  description: string;
  price: number;
  category: string;
}
```

#### Component Props
```typescript
// Component with typed props
interface MenuProps {
  items: MenuItem[];
  categories?: string[];
}

export function Menu({ items, categories }: MenuProps) {
  // Fully typed component
}
```

### Import Path Aliases
All projects include TypeScript path mapping:

```typescript
// tsconfig.json
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"],
      "@/components/*": ["./src/components/*"],
      "@/data/*": ["./src/data/*"],
      "@/types/*": ["./src/types/*"]
    }
  }
}
```

## 🎨 Styling Architecture

### Tailwind CSS + Material-UI
All websites combine utility-first CSS with component library:

#### Global Styles (globals.css)
```css
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --primary-color: #FF6B35;
  --secondary-color: #4ECDC4;
}

.hero-section {
  @apply bg-gradient-to-r from-primary to-secondary;
}
```

#### Material-UI Theme (theme.ts)
```typescript
import { createTheme } from '@mui/material/styles';

export const theme = createTheme({
  palette: {
    primary: {
      main: '#FF6B35',
    },
    secondary: {
      main: '#4ECDC4',
    },
  },
  typography: {
    fontFamily: 'Inter, sans-serif',
  },
});
```

## 📊 Data Integration

### Restaurant Data Access
Generated websites access restaurant data in multiple ways:

#### 1. Build-time Data (Recommended)
```typescript
// src/data/restaurant.ts - Transformed during build
import { RestaurantData } from '@/types/restaurant';

export const restaurantData: RestaurantData = {
  name: "Restaurant Name",
  menu: [/* menu items */],
  // ... other data
};
```

#### 2. Runtime Data (Future Enhancement)
```typescript
// restaurant-data.json - Runtime access for dynamic updates
useEffect(() => {
  fetch('/restaurant-data.json')
    .then(res => res.json())
    .then(data => setRestaurantData(data));
}, []);
```

## 🚀 Performance Optimization

### Next.js Optimizations Applied
- **Automatic code splitting**: Pages load only necessary code
- **Image optimization**: Next.js Image component with lazy loading
- **Bundle analysis**: Webpack bundle analyzer included
- **Tree shaking**: Unused code automatically removed
- **Static generation**: Pre-rendered HTML for fast loading

### Performance Monitoring
```typescript
// Optional: Add performance monitoring
import { getCLS, getFID, getFCP, getLCP, getTTFB } from 'web-vitals';

getCLS(console.log);
getFID(console.log);
getFCP(console.log);
getLCP(console.log);
getTTFB(console.log);
```

## 🔍 SEO Configuration

### Meta Tags and SEO
Each website includes comprehensive SEO configuration:

```typescript
// layout.tsx - SEO metadata
export const metadata: Metadata = {
  title: restaurantData.name,
  description: restaurantData.description,
  keywords: ['restaurant', 'food', 'dining'],
  authors: [{ name: 'Restaurant Website Generator' }],
  openGraph: {
    title: restaurantData.name,
    description: restaurantData.description,
    images: [restaurantData.heroImage],
  },
  twitter: {
    card: 'summary_large_image',
    title: restaurantData.name,
    description: restaurantData.description,
  },
};
```

### Structured Data
JSON-LD structured data for search engines:

```typescript
const structuredData = {
  "@context": "https://schema.org",
  "@type": "Restaurant",
  "name": restaurantData.name,
  "description": restaurantData.description,
  "address": restaurantData.address,
  "telephone": restaurantData.phone,
  "menu": restaurantData.menu.map(item => ({
    "@type": "MenuItem",
    "name": item.name,
    "description": item.description,
    "offers": {
      "@type": "Offer",
      "price": item.price,
      "priceCurrency": "SAR"
    }
  }))
};
```

## 🛠️ Development Best Practices

### Code Quality
- **ESLint + Prettier**: Code formatting and linting
- **TypeScript strict mode**: Full type checking
- **Component testing**: Jest and React Testing Library ready
- **Accessibility**: WCAG 2.1 AA compliance built-in

### Development Workflow
1. **Start with existing template**: Copy working template as base
2. **Customize incrementally**: Modify layout, styling, components
3. **Test with real data**: Use CLI to generate test websites
4. **Validate responsiveness**: Test across device sizes
5. **Check performance**: Use Next.js built-in optimizations

### Debugging
```bash
# Development server with debugging
npm run dev

# Build analysis
npm run build
npm run analyze  # If bundle analyzer configured

# Type checking
npx tsc --noEmit

# Linting
npm run lint
```

## 🚀 Deployment Considerations

### Static Export Benefits
- **CDN deployment**: Works with any CDN or static host
- **Fast loading**: Pre-rendered HTML serves immediately
- **SEO friendly**: Search engines can crawl static content
- **Cost effective**: No server costs for hosting

### Vercel Deployment
Vercel provides optimal Next.js hosting:
- **Automatic optimizations**: Next.js specific optimizations
- **Edge functions**: Available for future enhancements
- **Analytics**: Built-in performance monitoring
- **Preview deployments**: Every push gets preview URL

## 🔧 Troubleshooting

### Common Next.js Issues

**Build Errors**:
```bash
# Clear Next.js cache
rm -rf .next
npm run build
```

**TypeScript Errors**:
```bash
# Check types without building
npx tsc --noEmit

# Update TypeScript
npm install typescript@latest
```

**Styling Issues**:
```bash
# Regenerate Tailwind
npm run build:css

# Check PostCSS configuration
cat postcss.config.mjs
```

### Development Tips
- **Hot reload**: Changes reflect immediately in development
- **Error overlay**: Next.js shows errors in browser during development
- **Build output**: Check `out/` directory for static export results
- **Package scripts**: Use npm scripts defined in package.json

---

**Every restaurant website is a professional Next.js 15 application ready for production deployment! 🚀**

